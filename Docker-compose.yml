# dockerâ€‘compose.yml
version: '3.8'

services:
  reader3:
    build: .
    container_name: reader3
    # Set UID:GID for the process that runs inside the container
    user: "1000:1000"
    ports:
      - "8123:8123"

    # Mount host directories into the container
    volumes:
      # General path for downloaded books (replace with the actual path on your host)
      - /data/books:/app/books
      # Persist data on the host (keeps logs, configs, etc. across restarts)
      - ./data:/app/data

    environment:
      # Disable Python buffering so logs appear immediately
      - PYTHONUNBUFFERED=1

    restart: unless-stopped

    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:8123/health"]
      interval: 30s
      timeout: 10s
      retries: 3
